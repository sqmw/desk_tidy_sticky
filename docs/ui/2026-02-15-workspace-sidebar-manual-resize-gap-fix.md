# 2026-02-15 Workspace 手动分区空白区修复（Follow-up）

## 现象
- 手动模式下，侧栏“导航”卡片在部分场景会出现大块空白，视觉上像“卡住”。
- 自动模式不会出现该问题，因此用户感知为手动模式异常。

## 根因
- 手动模式按固定比例直接拉伸顶部卡片高度。
- 当顶部内容较少（例如仅“笔记/专注”两项）时，卡片被强制撑高，产生大量空白。

## 修复策略
- 在手动模式中引入“默认比例自适配”：
  - 若当前比例仍是默认值（代表用户尚未手动拖拽自定义），不直接套固定比例。
  - 改为优先使用“顶部内容自然高度”推导比例，避免一进入手动就出现大空白。
- 一旦用户实际拖拽，比例变为非默认值，继续按用户自定义比例工作。
- 放宽手动比例硬限制：
  - `manual-split-layout` 的比例归一化下限/上限由 `0.22~0.78` 调整为 `0.08~0.92`。
  - 实际最小高度仍由像素级最小分区约束控制（不是固定比例卡死），解决“拖不上去”。

## 代码变更
- `src/lib/components/workspace/WorkspaceSidebar.svelte`
  - 新增：
    - `modulesBlockEl` / `modulesNaturalHeight` 采样顶部内容自然高度
    - `manualResolvedRatio` 解析最终比例（默认值 -> 内容贴合；自定义值 -> 原样使用）
  - `manualSplit` 改用 `manualResolvedRatio` 计算上下分区高度。

## 验证
- `npm run check`：通过（0 errors / 0 warnings）
- `cargo check`：通过（仅历史 warning）
