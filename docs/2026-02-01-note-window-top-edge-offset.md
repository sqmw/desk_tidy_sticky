# 2026-02-01 — 贴纸独立窗口：边缘贴合偏移（Header 预留导致可视内容不到边）

## 问题
- 在“每个贴纸一个独立窗口”（`NoteWindowPage`）模式下，把窗口拖到屏幕边缘时，贴纸可视内容无法真正贴到屏幕边（会出现一段透明间隔）。
- 透明间隔高度约等于贴纸 Header 高度（`32px`）。但 Header 在非悬浮/非编辑时是隐藏/忽略的（`height: 0` + `IgnorePointer`），因此不应影响“贴纸可视内容”贴边效果。

## 根因
- `NoteWindowPage` 的窗口高度估算一直包含 `Header(32px)`，用于保证悬浮/编辑时按钮区域有空间。
- 当 Header 隐藏（卡片高度减少）时，窗口内部会多出一段“预留空间”，而这段空间落在“贴边方向”就会造成错觉：窗口到边了，但内容没到边。

## 修复
- 引入“按屏幕边缘自动对齐”的策略：根据窗口是否贴近屏幕的上/下/左/右边缘，动态调整 `Align.alignment`，把 Header 预留空间放到**远离屏幕边缘**的一侧，从而让贴纸可视内容能贴边。
- 增加窗口位置的边界钳制：当窗口拖出屏幕（如左边界超出）时，在**拖动结束（松开鼠标）后**自动把窗口位置拉回到可见范围内，避免拖动过程闪动。
- 默认：顶部对齐（贴顶时内容能到屏幕上边界）。
- 当窗口贴近屏幕底部：切换为底部对齐（内容能到屏幕下边界）。
- 左右同理（当前窗口宽度基本等于卡片宽度，效果不明显，但逻辑保持对称，避免后续 UI 变化再踩坑）。

## 验证
1) 打开任意贴纸独立窗口。
2) 将窗口拖到屏幕最上方。
3) 将窗口拖到屏幕最下方/最左侧/最右侧。
4) 预期：贴纸可视内容在四个方向都能贴边，不再出现 `≈32px` 的透明空隙错觉（悬浮/编辑时 Header 出现属于正常 UI）。
