# 交互模式临时置顶

> 说明：该文档针对“Top/Bottom 双 Overlay 全屏窗口”时期的实现。
> 2026-01-31 起切换为「方案C：每贴纸一个窗口」，详见 `docs/2026-01-31-per-note-windows.md`。

## 现象
- 未设置置顶的贴纸，在切换到“鼠标交互/编辑模式”后仍停留在底层。
- 结果是无法直接编辑或被其他窗口遮挡。

## 原因
- 之前的逻辑为了避免“置底时误浮到最前”而强制底层常驻底部。
- 交互模式没有临时提升 Z-order。

## 修复
- 交互模式（非点击穿透）时，强制 overlay 窗口置顶。
- 退出交互模式后再回到对应层级（top/bottom/any）。
- 交互模式下禁用“置底延迟复位”，避免被重新拉回 WorkerW。
- 交互模式仅保留「Top Overlay」窗口显示所有便签，底层窗口隐藏以避免全屏窗口互相拦截。
- 切换交互模式时，对所有便签增加短暂「交接保留」以避免切换瞬间消失。

## 影响文件
- `lib/pages/overlay/overlay_page.dart`
